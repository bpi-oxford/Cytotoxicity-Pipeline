

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python Cytotoxicity Pipeline (pyCyto) &mdash; pyCyto 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=01f34227"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyCyto Analysis Pipeline" href="pipeline.html" />
    <link rel="prev" title="Welcome to pyCyto’s Documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pyCyto
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python Cytotoxicity Pipeline (pyCyto)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#processing-pipeline">Processing Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#detailed-pipeline-steps-features">Detailed Pipeline Steps &amp; Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-data">Example Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-cases">Test Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment-setup">Environment Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#native-python-runtime">Native Python Runtime</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docker-runtime">Docker Runtime</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#package-installation">Package Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pip">PIP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-source">From Source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#yaml-example">YAML Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-guide">Development Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="#todo">TODO</a></li>
<li class="toctree-l2"><a class="reference internal" href="#authors">Authors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">pyCyto Analysis Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Native Python Runtime Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer Guide for Cytotoxicity Pipeline</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyCyto</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Python Cytotoxicity Pipeline (pyCyto)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/introduction.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="python-cytotoxicity-pipeline-pycyto">
<h1>Python Cytotoxicity Pipeline (pyCyto)<a class="headerlink" href="#python-cytotoxicity-pipeline-pycyto" title="Link to this heading"></a></h1>
<p><strong>pyCyto</strong> is a flexible and extensible Python-based workflow package designed for analyzing microscopic cytotoxicity assays. It enables researchers and bioimage analysts to build reproducible analysis pipelines using simple YAML configuration files. Key features include support for multi-channel images, integration with Dask for parallel processing, and a modular design covering preprocessing, segmentation, tracking, and postprocessing analysis.</p>
<section id="processing-pipeline">
<h2>Processing Pipeline<a class="headerlink" href="#processing-pipeline" title="Link to this heading"></a></h2>
<p>The dynamic cytotoxicity analysis pipeline can be found in <a class="reference internal" href="#./doc/pipeline.md"><span class="xref myst">./doc/pipeline.md</span></a>.</p>
</section>
<section id="detailed-pipeline-steps-features">
<h2>Detailed Pipeline Steps &amp; Features<a class="headerlink" href="#detailed-pipeline-steps-features" title="Link to this heading"></a></h2>
<ul>
<li><p>File IO</p>
<ul class="simple">
<li><p>[x] Multi-channel image handling pipeline</p></li>
<li><p>[x] Dask implementation</p></li>
<li><p>[ ] OME ZARR IO</p></li>
</ul>
</li>
<li><p>Preprocessing</p>
<ul class="simple">
<li><p>[ ] Decovolution</p></li>
<li><p>[ ] Flat field correction</p></li>
<li><p>[ ] Denoising</p></li>
<li><p>[ ] Gamma correction</p></li>
<li><p>[x] Intensity normalization</p></li>
<li><p>[ ] Pixel size normalization</p></li>
<li><p>[x] Channel merge</p></li>
<li><p>[x] Cross channel pixel correlation</p></li>
</ul>
</li>
<li><p>Segmentation</p>
<p>Detection masks and cell centroids are expect to be in trackpy compatible format</p>
<ul class="simple">
<li><p>[ ] Simple thresholding</p></li>
<li><p>[ ] Otsu thresholding</p></li>
<li><p>[x] StarDist</p></li>
<li><p>[x] Cellpose</p></li>
<li><p>[ ] Morphological operations</p></li>
<li><p>[x] Connected components</p></li>
</ul>
</li>
<li><p>Tracking</p>
<ul class="simple">
<li><p>[x] Dense to sparse</p></li>
<li><p>[x] Feature measurements</p></li>
<li><p>[ ] trackpy</p></li>
<li><p>[x] TrackMate (pyImageJ integration, script based automation, with user provided centroids/segmentation masks)</p></li>
<li><p>[ ] ultrack</p></li>
</ul>
</li>
<li><p>Contact Tracing</p>
<ul class="simple">
<li><p>[ ] Number of contacts (same cell type/ different cell types)</p></li>
<li><p>[ ] Contact time measurements</p></li>
<li><p>[ ] Number of cell killing</p></li>
<li><p>[ ] Cell death event</p></li>
<li><p>[ ] Which cell(s) are interaction</p></li>
<li><p>[ ] Pandas/CSV export in trackpy format</p></li>
<li><p>[ ] Displacement, velocity</p></li>
<li><p>[ ] Analysis plots</p></li>
</ul>
</li>
</ul>
<p>The result Pandas table should take the following format:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Id</p></th>
<th class="head text-center"><p>Track</p></th>
<th class="head text-center"><p>x</p></th>
<th class="head text-center"><p>y</p></th>
<th class="head"><p>z</p></th>
<th class="head"><p>t</p></th>
<th class="head"><p>alive</p></th>
<th class="head"><p>vel_x</p></th>
<th class="head"><p>vel_z</p></th>
<th class="head"><p>vel_y</p></th>
<th class="head"><p>contact_same</p></th>
<th class="head"><p>contact_diff</p></th>
<th class="head"><p>contact_same_id</p></th>
<th class="head"><p>contacting_diff_id</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>0</p></td>
<td class="text-center"><p>1</p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>1</p></td>
<td class="text-center"><p>2</p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>2</p></td>
<td class="text-center"><p>1</p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>3</p></td>
<td class="text-center"><p>1</p></td>
<td class="text-center"><p></p></td>
<td class="text-center"><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h2>
<p>Comprehensive documentation, including tutorials, API references, and detailed explanations, is available on the <a class="reference external" href="https://bpi-oxford.github.io/Cytotoxicity-Pipeline/">documentation site</a>. The source files for the documentation, built with Sphinx, reside in the <a class="reference internal" href="#./doc"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">./doc</span></code></span></a> directory.</p>
</section>
<section id="example-data">
<h2>Example Data<a class="headerlink" href="#example-data" title="Link to this heading"></a></h2>
<p>Example datasets for testing the pipeline can be found in the <a class="reference internal" href="#./data"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">./data</span></code></span></a> directory. Due to large file size, data is managed by Git LFS. See the documentation for details on acquiring and using the example data.</p>
</section>
<section id="test-cases">
<h2>Test Cases<a class="headerlink" href="#test-cases" title="Link to this heading"></a></h2>
<p>End-to-end test cases demonstrating pipeline usage with example data are located in the <a class="reference internal" href="#./tests"><span class="xref myst"><code class="docutils literal notranslate"><span class="pre">./tests</span></code></span></a> directory. These can be used to verify installation and understand different configuration options.</p>
</section>
<section id="environment-setup">
<h2>Environment Setup<a class="headerlink" href="#environment-setup" title="Link to this heading"></a></h2>
<section id="native-python-runtime">
<h3>Native Python Runtime<a class="headerlink" href="#native-python-runtime" title="Link to this heading"></a></h3>
<p>Check <a class="reference internal" href="#./doc/setup.md"><span class="xref myst">./doc/setup.md</span></a> for the setup instruction.</p>
</section>
<section id="docker-runtime">
<h3>Docker Runtime<a class="headerlink" href="#docker-runtime" title="Link to this heading"></a></h3>
<p>For quick environment setup use the docker image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>build<span class="w"> </span>--pull<span class="w"> </span>--rm<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;Dockerfile&quot;</span><span class="w"> </span>-t<span class="w"> </span>cytotoxicity-pipeline:latest<span class="w"> </span><span class="s2">&quot;.&quot;</span>
docker<span class="w"> </span>run<span class="w"> </span>--gpus<span class="w"> </span>all<span class="w"> </span>-u<span class="w"> </span><span class="k">$(</span>id<span class="w"> </span>-u<span class="k">)</span>:<span class="k">$(</span>id<span class="w"> </span>-g<span class="k">)</span><span class="w"> </span>-v<span class="w"> </span>&lt;path-to-data&gt;:/data<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span>-p<span class="w"> </span><span class="m">8787</span>:8787/tcp<span class="w"> </span>cytotoxicity-pipeline:latest<span class="w"> </span>bash
</pre></div>
</div>
</section>
</section>
<section id="package-installation">
<h2>Package Installation<a class="headerlink" href="#package-installation" title="Link to this heading"></a></h2>
<section id="pip">
<h3>PIP<a class="headerlink" href="#pip" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/bpi-oxford/Cytotoxicity-Pipeline
</pre></div>
</div>
</section>
<section id="from-source">
<h3>From Source<a class="headerlink" href="#from-source" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:bpi-oxford/Cytotoxicity-Pipeline.git
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
</section>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Single Node</span>
cyto<span class="w"> </span>--pipeline<span class="w"> </span>&lt;path-to-pipeline.yaml&gt;<span class="w"> </span>-v

<span class="c1"># Run from source</span>
python<span class="w"> </span>main.py<span class="w"> </span>--pipeline<span class="w"> </span>&lt;path-to-pipeline.yaml&gt;<span class="w"> </span>-v
</pre></div>
</div>
<p>During runtime a Dask daskboard is created. Usually you can access with the address: http://localhost:8787/status, but check if the port is matches output on the line:</p>
<div class="highlight-log notranslate"><div class="highlight"><pre><span></span>2023-05-26 18:19:55,929 - distributed.scheduler - INFO -   dashboard at:  http://129.67.90.167:8787/status
</pre></div>
</div>
<section id="yaml-example">
<h3>YAML Example<a class="headerlink" href="#yaml-example" title="Link to this heading"></a></h3>
<p>Check the pipeline YAML example in <a class="reference internal" href="#./pipelines/pipeline.yaml"><span class="xref myst">./pipelines/pipeline.yaml</span></a></p>
</section>
</section>
<section id="development-guide">
<h2>Development Guide<a class="headerlink" href="#development-guide" title="Link to this heading"></a></h2>
<p>For developers please follow the guide in <a class="reference internal" href="#./doc/dev_guide.md"><span class="xref myst">./doc/dev_guide.md</span></a>.</p>
</section>
<section id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>GUI pipeline configuration</p></li>
<li><p>SLURM distributed run</p></li>
<li><p>SimpleITK and OpenCV function wrapper</p></li>
</ul>
</section>
<section id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Jacky Ka Long Ko: <a class="reference external" href="mailto:ka&#46;ko&#37;&#52;&#48;kennedy&#46;ox&#46;ac&#46;uk">ka<span>&#46;</span>ko<span>&#64;</span>kennedy<span>&#46;</span>ox<span>&#46;</span>ac<span>&#46;</span>uk</a></p></li>
<li><p>Veronika Pfannenstill: <a class="reference external" href="mailto:veronika&#46;pfannenstill&#37;&#52;&#48;stx&#46;ox&#46;ac&#46;uk">veronika<span>&#46;</span>pfannenstill<span>&#64;</span>stx<span>&#46;</span>ox<span>&#46;</span>ac<span>&#46;</span>uk</a></p></li>
<li><p>Samuel Alber: <a class="reference external" href="mailto:salber&#37;&#52;&#48;berkeley&#46;edu">salber<span>&#64;</span>berkeley<span>&#46;</span>edu</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to pyCyto’s Documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline.html" class="btn btn-neutral float-right" title="pyCyto Analysis Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Jacky Ka Long Ko, Veronika Pfannenstill, Samuel Alber.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>